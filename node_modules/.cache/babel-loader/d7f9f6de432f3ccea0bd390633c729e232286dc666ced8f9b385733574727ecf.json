{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transformReply = exports.transformArguments = exports.IS_READ_ONLY = exports.FIRST_KEY_INDEX = void 0;\nconst _1 = require(\".\");\nexports.FIRST_KEY_INDEX = 1;\nexports.IS_READ_ONLY = true;\nfunction transformArguments(index, query, options) {\n  return (0, _1.pushSearchOptions)(['FT.SEARCH', index, query], options);\n}\nexports.transformArguments = transformArguments;\nfunction transformReply(reply, withoutDocuments) {\n  const documents = [];\n  let i = 1;\n  while (i < reply.length) {\n    documents.push({\n      id: reply[i++],\n      value: withoutDocuments ? Object.create(null) : documentValue(reply[i++])\n    });\n  }\n  return {\n    total: reply[0],\n    documents\n  };\n}\nexports.transformReply = transformReply;\nfunction documentValue(tuples) {\n  const message = Object.create(null);\n  let i = 0;\n  while (i < tuples.length) {\n    const key = tuples[i++],\n      value = tuples[i++];\n    if (key === '$') {\n      // might be a JSON reply\n      try {\n        Object.assign(message, JSON.parse(value));\n        continue;\n      } catch {\n        // set as a regular property if not a valid JSON\n      }\n    }\n    message[key] = value;\n  }\n  return message;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","transformReply","transformArguments","IS_READ_ONLY","FIRST_KEY_INDEX","_1","require","index","query","options","pushSearchOptions","reply","withoutDocuments","documents","i","length","push","id","create","documentValue","total","tuples","message","key","assign","JSON","parse"],"sources":["C:/rgraph/node_modules/@redis/search/dist/commands/SEARCH.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transformReply = exports.transformArguments = exports.IS_READ_ONLY = exports.FIRST_KEY_INDEX = void 0;\nconst _1 = require(\".\");\nexports.FIRST_KEY_INDEX = 1;\nexports.IS_READ_ONLY = true;\nfunction transformArguments(index, query, options) {\n    return (0, _1.pushSearchOptions)(['FT.SEARCH', index, query], options);\n}\nexports.transformArguments = transformArguments;\nfunction transformReply(reply, withoutDocuments) {\n    const documents = [];\n    let i = 1;\n    while (i < reply.length) {\n        documents.push({\n            id: reply[i++],\n            value: withoutDocuments ? Object.create(null) : documentValue(reply[i++])\n        });\n    }\n    return {\n        total: reply[0],\n        documents\n    };\n}\nexports.transformReply = transformReply;\nfunction documentValue(tuples) {\n    const message = Object.create(null);\n    let i = 0;\n    while (i < tuples.length) {\n        const key = tuples[i++], value = tuples[i++];\n        if (key === '$') { // might be a JSON reply\n            try {\n                Object.assign(message, JSON.parse(value));\n                continue;\n            }\n            catch {\n                // set as a regular property if not a valid JSON\n            }\n        }\n        message[key] = value;\n    }\n    return message;\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,cAAc,GAAGF,OAAO,CAACG,kBAAkB,GAAGH,OAAO,CAACI,YAAY,GAAGJ,OAAO,CAACK,eAAe,GAAG,KAAK,CAAC;AAC7G,MAAMC,EAAE,GAAGC,OAAO,CAAC,GAAG,CAAC;AACvBP,OAAO,CAACK,eAAe,GAAG,CAAC;AAC3BL,OAAO,CAACI,YAAY,GAAG,IAAI;AAC3B,SAASD,kBAAkBA,CAACK,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAC/C,OAAO,CAAC,CAAC,EAAEJ,EAAE,CAACK,iBAAiB,EAAE,CAAC,WAAW,EAAEH,KAAK,EAAEC,KAAK,CAAC,EAAEC,OAAO,CAAC;AAC1E;AACAV,OAAO,CAACG,kBAAkB,GAAGA,kBAAkB;AAC/C,SAASD,cAAcA,CAACU,KAAK,EAAEC,gBAAgB,EAAE;EAC7C,MAAMC,SAAS,GAAG,EAAE;EACpB,IAAIC,CAAC,GAAG,CAAC;EACT,OAAOA,CAAC,GAAGH,KAAK,CAACI,MAAM,EAAE;IACrBF,SAAS,CAACG,IAAI,CAAC;MACXC,EAAE,EAAEN,KAAK,CAACG,CAAC,EAAE,CAAC;MACdd,KAAK,EAAEY,gBAAgB,GAAGf,MAAM,CAACqB,MAAM,CAAC,IAAI,CAAC,GAAGC,aAAa,CAACR,KAAK,CAACG,CAAC,EAAE,CAAC;IAC5E,CAAC,CAAC;EACN;EACA,OAAO;IACHM,KAAK,EAAET,KAAK,CAAC,CAAC,CAAC;IACfE;EACJ,CAAC;AACL;AACAd,OAAO,CAACE,cAAc,GAAGA,cAAc;AACvC,SAASkB,aAAaA,CAACE,MAAM,EAAE;EAC3B,MAAMC,OAAO,GAAGzB,MAAM,CAACqB,MAAM,CAAC,IAAI,CAAC;EACnC,IAAIJ,CAAC,GAAG,CAAC;EACT,OAAOA,CAAC,GAAGO,MAAM,CAACN,MAAM,EAAE;IACtB,MAAMQ,GAAG,GAAGF,MAAM,CAACP,CAAC,EAAE,CAAC;MAAEd,KAAK,GAAGqB,MAAM,CAACP,CAAC,EAAE,CAAC;IAC5C,IAAIS,GAAG,KAAK,GAAG,EAAE;MAAE;MACf,IAAI;QACA1B,MAAM,CAAC2B,MAAM,CAACF,OAAO,EAAEG,IAAI,CAACC,KAAK,CAAC1B,KAAK,CAAC,CAAC;QACzC;MACJ,CAAC,CACD,MAAM;QACF;MAAA;IAER;IACAsB,OAAO,CAACC,GAAG,CAAC,GAAGvB,KAAK;EACxB;EACA,OAAOsB,OAAO;AAClB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}